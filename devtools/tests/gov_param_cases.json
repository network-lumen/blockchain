[
  {
    "scenario": "deposit_topup",
    "description": "Initial deposit meets ratio but needs an additional deposit to enter voting",
    "proposal": {
      "messages": [
        {
          "type": "dns_update_params",
          "changes": {
            "update_fee_ulmn": "0"
          }
        }
      ],
      "initial_deposit": "3000000ulmn"
    },
    "topup": {
      "from": "voter2",
      "amount": "7000000ulmn"
    },
    "expect": {
      "status_after_topup": "PROPOSAL_STATUS_VOTING_PERIOD"
    }
  },
  {
    "scenario": "gov_param_mutation_blocked",
    "description": "Attempting to mutate x/gov params is rejected",
    "value": "0.750000000000000000"
  },
  {
    "scenario": "insufficient_initial_deposit",
    "description": "Submitting with a deposit below min_initial_deposit_ratio fails on-chain",
    "proposal": {
      "messages": [
        {
          "type": "dns_update_params",
          "changes": {
            "update_fee_ulmn": "0"
          }
        }
      ],
      "initial_deposit": "1ulmn"
    }
  },
  {
    "scenario": "authority_invalid",
    "description": "Using a non-gov authority in MsgUpdateParams fails",
    "proposal": {
      "messages": [
        {
          "type": "dns_update_params",
          "changes": {
            "update_fee_ulmn": "1"
          },
          "authority_override": "$VALIDATOR"
        }
      ],
      "initial_deposit": "10000000ulmn"
    },
    "expect": {
      "tx_failure": true
    }
  },
  {
    "scenario": "multi_msg_atomic",
    "description": "Multiple messages execute atomically; failure in one rolls back the other",
    "proposal": {
      "messages": [
        {
          "type": "dns_update_params",
          "changes": {
            "update_fee_ulmn": "333000"
          }
        },
        {
          "type": "dns_update_params",
          "changes": {
            "floor": "5",
            "ceiling": "1"
          }
        }
      ],
      "initial_deposit": "10000000ulmn"
    },
    "expect": {
      "final_status": "PROPOSAL_STATUS_FAILED"
    }
  },
  {
    "scenario": "dns_update_fee_effect",
    "description": "Updating the DNS fee parameter charges the owner on MsgUpdate",
    "proposal": {
      "messages": [
        {
          "type": "dns_update_params",
          "changes": {
            "update_fee_ulmn": "250000"
          }
        }
      ],
      "initial_deposit": "10000000ulmn"
    },
    "post_tx": {
      "dns_update": {
        "domain": "govcase",
        "ext": "test",
        "records": [
          {
            "key": "txt",
            "value": "governance"
          }
        ]
      },
      "expect_fee_ulmn": "250000"
    }
  },
  {
    "scenario": "pqc_disabled",
    "description": "Submitting a proposal with --pqc-enable=false fails",
    "proposal": {
      "messages": [
        {
          "type": "dns_update_params",
          "changes": {
            "update_fee_ulmn": "0"
          }
        }
      ],
      "initial_deposit": "10000000ulmn"
    }
  },
  {
    "scenario": "weighted_split",
    "description": "Weighted votes split YES/NO/ABSTAIN and fail to meet threshold",
    "proposal": {
      "messages": [
        {
          "type": "dns_update_params",
          "changes": {
            "update_fee_ulmn": "0"
          }
        }
      ],
      "initial_deposit": "10000000ulmn"
    },
    "votes": [
      {
        "voter": "validator",
        "weighted": true,
        "options": "yes=0.25,no=0.5,abstain=0.25"
      }
    ],
    "expect": {
      "final_status": "PROPOSAL_STATUS_REJECTED"
    }
  },
  {
    "scenario": "multi_msg_success",
    "description": "Valid multi-message proposal updates multiple DNS params atomically",
    "proposal": {
      "messages": [
        {
          "type": "dns_update_params",
          "changes": {
            "update_fee_ulmn": "125000"
          }
        },
        {
          "type": "dns_update_params",
          "changes": {
            "update_rate_limit_seconds": 15
          }
        }
      ],
      "initial_deposit": "10000000ulmn"
    },
    "expect": {
      "params": {
        "update_fee_ulmn": "125000",
        "update_rate_limit_seconds": 15
      }
    }
  }
]
